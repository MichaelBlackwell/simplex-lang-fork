// Test: Reference and Dereference Operators
// Tests: &x (address-of) and *p (dereference)

fn test_address_of() -> i64 {
 let x: i64 = 42;
 let p: &i64 = &x;
 1 // Just test parsing for now
}

fn test_dereference() -> i64 {
 let x: i64 = 42;
 let p: &i64 = &x;
 *p // Should return 42
}

fn test_ref_param(x: &i64) -> i64 {
 *x
}

fn test_mut_ref(x: &mut i64) -> i64 {
 *x = *x + 1;
 *x
}

fn main() -> i64 {
 print("Testing address-of operator (&)");
 let a: i64 = test_address_of();
 if a != 1 {
 print("FAIL: test_address_of");
 return 1;
 }
 print(" PASS: address-of");

 print("Testing dereference operator (*)");
 let b: i64 = test_dereference();
 if b != 42 {
 print("FAIL: test_dereference");
 return 1;
 }
 print(" PASS: dereference");

 print("Testing reference parameter");
 let val: i64 = 100;
 let c: i64 = test_ref_param(&val);
 if c != 100 {
 print("FAIL: test_ref_param");
 return 1;
 }
 print(" PASS: ref param");

 print("All tests passed!");
 0
}
