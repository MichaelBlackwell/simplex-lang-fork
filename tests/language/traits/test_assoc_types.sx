// Phase 36 Test: P1.4 - Associated Type Paths (Self::Item)

trait Iterator {
    type Item;

    fn next(&mut self) -> Option<Self::Item>;
    fn size_hint(&self) -> i64;
}

struct RangeIter {
    current: i64,
    end: i64
}

impl Iterator for RangeIter {
    type Item = i64;

    fn next(&mut self) -> Option<Self::Item> {
        if self.current < self.end {
            let val: i64 = self.current;
            self.current = self.current + 1;
            Some(val)
        } else {
            None
        }
    }

    fn size_hint(&self) -> i64 {
        self.end - self.current
    }
}

trait Container {
    type Element;

    fn get(&self, index: i64) -> Option<Self::Element>;
    fn len(&self) -> i64;
}

fn main() -> i64 {
    print("Testing P1.4: Associated type paths (Self::Item)");

    let iter = RangeIter { current: 0, end: 3 };
    let hint: i64 = iter.size_hint();
    if hint != 3 {
        print("FAIL: size_hint wrong");
        return 1;
    }
    print("  PASS: associated type in trait");

    print("All P1.4 tests passed!");
    0
}
