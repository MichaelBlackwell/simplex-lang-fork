// Phase 36 Test: C2.3 - if-let return types

enum Option<T> {
    None,
    Some(T),
}

fn get_some() -> Option<i64> {
    Some(42)
}

fn get_none() -> Option<i64> {
    None
}

fn test_if_let_some() -> i64 {
    if let Some(x) = get_some() {
        x
    } else {
        0
    }
}

fn test_if_let_none() -> i64 {
    if let Some(x) = get_none() {
        x
    } else {
        -1
    }
}

fn main() -> i64 {
    print("Testing C2.3: if-let return types");

    let r1: i64 = test_if_let_some();
    if r1 != 42 {
        print("FAIL: if let Some");
        return 1;
    }
    print("  PASS: if let Some(x)");

    let r2: i64 = test_if_let_none();
    if r2 != -1 {
        print("FAIL: if let None branch");
        return 2;
    }
    print("  PASS: if let else branch");

    print("All C2.3 tests passed!");
    0
}
