// Test for infer() outside specialist context
// Tests the "default model" code path
// Rewritten to use supported syntax

fn test_infer_in_function() -> i64 {
 println(" Testing infer() in regular function...");

 // This should work - infer() outside specialist uses "default" model
 let response: i64 = infer("What is 2 + 2?");

 if response != 0 {
 print(" Response received, length: ");
 print_i64(string_len(response));
 println("");
 println(" PASS: infer() works outside specialist");
 1
 } else {
 println(" FAIL: infer() returned null");
 0
 }
}

fn test_infer_with_concat() -> i64 {
 println(" Testing infer() with string concatenation...");

 let prompt: i64 = string_concat("Explain ", "briefly");
 let response: i64 = infer(prompt);

 if response != 0 {
 println(" PASS: infer() works with dynamic prompt");
 1
 } else {
 println(" FAIL: infer() with concat returned null");
 0
 }
}

fn main() -> i64 {
 println("=== Testing infer() Outside Specialist Context ===");
 println("");

 var passed: i64 = 0;
 let total: i64 = 2;

 passed = passed + test_infer_in_function();
 println("");
 passed = passed + test_infer_with_concat();

 println("");
 print("Results: ");
 print_i64(passed);
 print("/");
 print_i64(total);
 println(" tests passed");

 if passed == total {
 println("=== ALL TESTS PASSED ===");
 0
 } else {
 println("=== SOME TESTS FAILED ===");
 1
 }
}
