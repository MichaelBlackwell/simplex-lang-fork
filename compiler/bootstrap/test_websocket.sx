// WebSocket intrinsics test file
// Tests WebSocket opcode constants

fn main() -> i64 {
    let passed = 0;
    let failed = 0;
    print("=== WebSocket Tests ===\n");

    // Test 1: ws_opcode_text returns expected value (0x1)
    print("Test 1: ws_opcode_text returns 1... ");
    if ws_opcode_text() == 1 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 2: ws_opcode_binary returns expected value (0x2)
    print("Test 2: ws_opcode_binary returns 2... ");
    if ws_opcode_binary() == 2 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 3: ws_opcode_close returns expected value (0x8)
    print("Test 3: ws_opcode_close returns 8... ");
    if ws_opcode_close() == 8 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 4: ws_opcode_ping returns expected value (0x9)
    print("Test 4: ws_opcode_ping returns 9... ");
    if ws_opcode_ping() == 9 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 5: ws_opcode_pong returns expected value (0xA)
    print("Test 5: ws_opcode_pong returns 10... ");
    if ws_opcode_pong() == 10 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 6: Text and binary opcodes are different
    print("Test 6: text != binary opcodes... ");
    if ws_opcode_text() != ws_opcode_binary() {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 7: Ping and pong opcodes are different
    print("Test 7: ping != pong opcodes... ");
    if ws_opcode_ping() != ws_opcode_pong() {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 8: All opcodes are positive
    print("Test 8: All opcodes are positive... ");
    if ws_opcode_text() > 0 && ws_opcode_binary() > 0 && ws_opcode_close() > 0 && ws_opcode_ping() > 0 && ws_opcode_pong() > 0 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 9: Control opcodes (close, ping, pong) are >= 8
    print("Test 9: Control opcodes >= 8... ");
    if ws_opcode_close() >= 8 && ws_opcode_ping() >= 8 && ws_opcode_pong() >= 8 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    // Test 10: Data opcodes (text, binary) are < 8
    print("Test 10: Data opcodes < 8... ");
    if ws_opcode_text() < 8 && ws_opcode_binary() < 8 {
        print("PASSED\n");
        passed = passed + 1;
    } else {
        print("FAILED\n");
        failed = failed + 1;
    }

    print("Passed: "); print_i64(passed); print(" / "); print_i64(passed + failed); print("\n");
    return failed;
}
